<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Get Public Transport Timetables | hann.io</title>
  <meta name="description" content="About two years ago, I shared an article about a project where I query and process results from the Google Transit API in a way that provides a simple overvi...">

  <!-- Google Fonts loaded here depending on setting in _data/options.yml true loads font, blank does not-->
  
    <link href='//fonts.googleapis.com/css?family=Lato:400,400italic' rel='stylesheet' type='text/css'>
  
  
  <!-- Load up MathJax script if needed ... specify in /_data/options.yml file-->
  
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

  <link rel="stylesheet" type="text/css" href="/css/tufte.css">
  <!-- <link rel="stylesheet" type="text/css" href="/css/print.css" media="print"> -->
  
  <link rel="canonical" href="https://hann.io/articles/2020/get-public-transport-timetables/">
  

  <link rel="alternate" type="application/rss+xml" title="hann.io" href="https://hann.io/feed.xml" />

  

  <!-- favico and friends -->
  <link rel="apple-touch-icon" sizes="180x180" href="/favico/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favico/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favico/favicon-16x16.png">
  <link rel="manifest" href="/favico/site.webmanifest">
  <link rel="mask-icon" href="/favico/safari-pinned-tab.svg" color="#a00000">
  <link rel="shortcut icon" href="/favico/favicon.ico">
  <meta name="msapplication-TileColor" content="#a00000">
  <meta name="msapplication-config" content="/favico/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">
  <!-- favico end -->


  <!-- og -->
  <meta property="og:title" content="Get Public Transport Timetables" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://hann.io/articles/2020/get-public-transport-timetables/" />
  <meta property="og:description" content="About two years ago, I shared an article about a project where I query and process results from the Google Transit API in a way that provides a simple overvi..." />
  <meta property="og:image" content="https://storage.googleapis.com/storage.hann.io/og/gptt.jpg" />
  <meta property="article:published_time" content="2020-05-25T00:00:00+02:00" />
  <!-- og end -->
</head>

  <body>
    <!--- Header and nav template site-wide -->
<header>
    <nav class="group">
				<a href="/">hann.io</a>
	<!--<a href="/"><img class="badge" src="/img/badge_1.png" alt="CH"></a>-->
	
		
		
		
		
		
		
		
		
	</nav>
</header>
    <article class="group">
      <h1>Get Public Transport Timetables</h1>
<p class="subtitle">May 25, 2020

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

</p>

<p>About two years ago, I shared an <a href="/articles/2018/nicely-formatted-transit-schedules/">article</a> about a project where I query and process results from the Google Transit API in a way that provides a simple overview for public transport connections between two places. Since I ended up using it rather frequently, I decided to turn it into a proper Python package, called <em>gptt</em>, available on <a href="https://github.com/andrashann/gptt">GitHub</a> and <a href="https://pypi.org/project/gptt/">PyPI</a>.</p>

<!--more-->

<h2 id="rationale">Rationale</h2>

<p><em>gptt</em> is primarily intended to be used as a command line tool, although its core functions can be used in any Python program. Using the default template (which can be customized or entirely replaced), it generates detailed timetables like this one:</p>

<p><figure><img src="https://storage.googleapis.com/storage.hann.io/img/menetrend_timetable.png" alt="" /><figcaption><span>Connections between Budapest and Balatonhenye in Hungary on August 19, 2018 as generated by the original <a href="https://github.com/andrashann/generate-nice-timetables">script</a>.</span></figcaption></figure></p>

<p>Why not just use Google’s transit results as aviable on Google Maps? As I explained in the <a href="/articles/2018/nicely-formatted-transit-schedules/">previous post</a>: <em>The “Schedule Explorer” interface […] is somewhat unintuitive (as you scroll, the displayed length of the trip might change) and buggy (sometimes when I click on a transit option to see the details I am presented with the details of a different option). It is also not possible to see all options for a day.</em></p>

<p>Just like in my initial Jupyter notebook, the default template contains the following information:</p>

<ul>
  <li>each leg of the trip</li>
  <li>depature and arrival localities, stations, and times</li>
  <li>vehicle (line) name and type (bus, train, etc) as well as destination (to know what to look for at the station)</li>
  <li>overall departure and arrival time and trip duration</li>
</ul>

<h2 id="usage">Usage</h2>

<p>After installing the package (e.g. with <code class="language-plaintext highlighter-rouge">pip install gptt</code>), a command line interface is available for use. Detailed instructions can be found in the <a href="https://github.com/andrashann/gptt/blob/master/README.md">readme</a>, but the overall idea is relatively simple: you can query a day’s connections between two points using the following command:</p>

<p><code class="language-plaintext highlighter-rouge">gptt -f "London" -t "Manchester" -d "2020-08-19" -k "ab4ab2fa-74c9-4af1-a250-9efe735c80fb"</code></p>

<p>The parameter indicated by <code class="language-plaintext highlighter-rouge">-k</code> is a Google API key, which you need to create yourself. You need a Google Cloud Platform project with the Directions and Time Zone API enabled. The documentations for these APIs (<a href="https://developers.google.com/maps/documentation/directions/get-api-key">Directions</a>, <a href="https://developers.google.com/maps/documentation/timezone/get-api-key">Time Zone</a>) will help you get started.</p>

<p>I encourage you to explore the <a href="https://github.com/andrashann/gptt/blob/master/README.md">documentation</a> of the package, where all the possible parameters and options are described in detail. If you have any ideas how to further improve this project, don’t hesitate to reach out to me – or, if you are a programmer, feel free to submit a pull request to the repo.</p>

<p><span style="display:block;width:100%;text-align:center">❧</span></p>

<p><em>Cover photo: Display showing trains departing from Déli Railway Station in Budapest, Hungary on October 8, 2020. Photo courtesy of a friend – all rights reserved.</em></p>



<div id="disqus_box">
<div id="disqus_thread"></div>
<script>
/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/

var disqus_config = function () {
this.page.url = "https://hann.io/articles/2020/get-public-transport-timetables/"
this.page.identifier = "/articles/2020/get-public-transport-timetables"
};

(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://hann-io.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>                    
</div>

    </article>
    <span class="print-footer">Get Public Transport Timetables - May 25, 2020 - András Hann</span>
    
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-120061833-1', 'auto');
    ga('send', 'pageview');
  </script>
  </body>
</html>
